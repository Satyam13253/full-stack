const readline = require('readline');

const rl = readline.createInterface({
    input: process.stdin,
    output: process.stdout
});

let employees = [];

function mainMenu() {
    console.log("\n=== Employee Management System ===");
    console.log("1. Add Employee");
    console.log("2. View All Employees");
    console.log("3. Update Employee");
    console.log("4. Delete Employee");
    console.log("5. Exit");

    rl.question("Enter your choice: ", choice => {
        switch(choice) {
            case '1': addEmployee(); break;
            case '2': viewEmployees(); break;
            case '3': updateEmployee(); break;
            case '4': deleteEmployee(); break;
            case '5': exitApp(); break;
            default: console.log("Invalid choice!"); mainMenu();
        }
    });
}

function addEmployee() {
    rl.question("Enter Employee ID: ", id => {
        rl.question("Enter Name: ", name => {
            rl.question("Enter Department: ", dept => {
                rl.question("Enter Salary: ", salary => {
                    employees.push({
                        id: id,
                        name: name,
                        department: dept,
                        salary: parseFloat(salary)
                    });
                    console.log("Employee added successfully!");
                    mainMenu();
                });
            });
        });
    });
}

function viewEmployees() {
    console.log("\n--- Employee List ---");
    if (employees.length === 0) console.log("No employees found.");
    else employees.forEach(emp => {
        console.log(`ID: ${emp.id}, Name: ${emp.name}, Dept: ${emp.department}, Salary: ${emp.salary}`);
    });
    mainMenu();
}

function updateEmployee() {
    rl.question("Enter Employee ID to update: ", id => {
        let emp = employees.find(e => e.id === id);
        if (!emp) {
            console.log("Employee not found.");
            mainMenu();
            return;
        }
        rl.question(`Enter new Name (${emp.name}): `, name => {
            rl.question(`Enter new Department (${emp.department}): `, dept => {
                rl.question(`Enter new Salary (${emp.salary}): `, salary => {
                    if(name) emp.name = name;
                    if(dept) emp.department = dept;
                    if(salary) emp.salary = parseFloat(salary);
                    console.log("Employee updated successfully!");
                    mainMenu();
                });
            });
        });
    });
}

function deleteEmployee() {
    rl.question("Enter Employee ID to delete: ", id => {
        let index = employees.findIndex(e => e.id === id);
        if(index === -1) {
            console.log("Employee not found.");
        } else {
            employees.splice(index, 1);
            console.log("Employee deleted successfully!");
        }
        mainMenu();
    });
}

function exitApp() {
    console.log("Exiting... Goodbye!");
    rl.close();
}

mainMenu();
